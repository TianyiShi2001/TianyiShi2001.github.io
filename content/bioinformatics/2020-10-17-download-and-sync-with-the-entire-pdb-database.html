---
title: Download and Sync with the Entire PDB Database
author: Tianyi Shi
date: '2020-10-17'
slug: download-and-sync-with-the-entire-pdb-database
categories:
  - bioinformatics
tags:
  - bioinformatics
  - PDB
  - protein
  - bash
term: 3-Michaelmas
week: 2
tutor: ~
summary: ~
bibliography: ../bib/main.bib
output:
  blogdown::html_page:
    number_sections: yes
    toc: yes
  rmarkdown::pdf_document:
    number_sections: yes
    toc: yes
nocite: ~
---



<p>All the PDB files are <a href="https://www.rcsb.org/pages/download/ftp">available via PDB’s FTP server</a>. Simply <code>cd</code> to a directory and use <code>wget</code> to download all of them.</p>
<pre class="bash"><code>mkdir pdb; cd pdb; mkdir zipped unzipped; cd zipped
wget ftp://ftp.wwpdb.org/pub/pdb/data/structures/all/pdb/*</code></pre>
<p>Depending on the traffic, The first download will take 2~4 days. After the first download, to sync the local database with the FTP server, add the <code>-N</code> option to <code>wget</code> (essentially this means downloading “new” files only).</p>
<p>The <code>*.ent.gz</code> files downloaded are zipped. You can use <code>gunzip</code> to decompress them to ready-to-use <code>*.ent</code> files (which is written in PDB format), but that will remove the <code>*.gz</code> files, which is inconvenient if you want to keep your database in sync with the remote. Use <code>gzcat</code> (or equivalently <code>gunzip -c</code>) instead to preserve the <code>*.gz</code> files while decompressing:</p>
<pre class="bash"><code>find . -name &quot;*.gz&quot; | xargs -I{} -n1 bash -c &#39;
src={}; dst=../unzipped/$(basename ${src%*.gz})
[ -f $dst ] &amp;&amp; echo &quot;$dst already exists, skipping...&quot; || ( gzcat -cv $src &gt; $dst )&#39;</code></pre>
<p>You can monitor the progress from the verbose output of <code>gzcat</code>:</p>
<pre><code>./pdb1byf.ent.gz:      78.1%
./pdb1byg.ent.gz:      76.3%
./pdb1byh.ent.gz:      77.3%
./pdb1byi.ent.gz:      75.2%
...</code></pre>
<script src="https://gist.github.com/TianyiShi2001/46fcc143b104cd47c7c768f958da2555.js"></script>
